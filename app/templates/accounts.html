<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> 帐号设置 </title>
    <script src="/static/js/jquery-3.0.0.min.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/bindactions.js"></script>
    <script src="/static/js/mytimeago.js"></script>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/mycss.css">
    <script>
        var upload = function(file) {
            // 要用一个 formdata 对象来装 file
            var fd = new FormData();
            fd.append('uploaded', file);

            $.ajax({
                url: '/api/upload',
                method: 'post',
                // 下面这两个选项一定要加上
                contentType: false,
                processData: false,
                data: fd,
                success: function(r) {
                    console.log('上传成功', file.name);
                },
                error: function() {
                    console.log('上传失败', file.name);
                }
            });
        };

        var addUserThings = function() {
            var image= arguments[0]
            log('文件',image)
            var form = {
                'nicheng': $('#id-input-nicheng').val(),
                'portrait': image
            };
            log('form')
            var success = function (r) {
              log('login, ', r);
              if(r.success) {
                  alert('添加成功');
                  $("#id-button-addUserThings").append(reviewTemplate())
              } else {
                  alert('添加失败');
              }
            };
            var error = function (err) {
              log(err);
            };
            log('form')
            vip.userAddThings(form, success, error);
        };
        var reviewTemplate = function () {
            var time = 1473173073.54224;
            var t = `
                <time data-time="${time}"></time>
            `
            return t
        }
    </script>
</head>
<body >
  <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Brand</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
          <li id="id-li-nav-1"><a href="/timeline"><span class="glyphicon glyphicon-user"></span> 个人主页 </a></li>
          <li id="id-li-nav-2"><a href="/plaza"><span class="glyphicon glyphicon-globe"></span> 微博广场 </a></li>
          <li id="id-li-nav-3"><a href="/accounts"><span class="glyphicon glyphicon-cog"></span> 帐号设置 </a></li>
          <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">更多 <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">关注的人</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">我的评论</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/logout">退出</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control"  placeholder="找你想要的">
        </div>
        <button type="submit" class="btn btn-default">搜索</button>
      </form>
    </div>
  </div>
</nav>
</br>
</br>
</br>
</br>

     <form class="registration-form" style="padding-left: 500px">
          <div class="form-group ">
            <label for="exampleInputEmail1">昵称</label>
            <input type="text" class="form-control" id="id-input-nicheng" placeholder="昵称" >
          </div>

          <div class="form-group ">
            <label for="exampleInputFile">头像</label>
            <!-- 指定 multiple 可以上传多个文件 -->
            <input type="file" id="id-input-file" >
            <p class="help-block">选择你想要上传的图片</p>
          </div>
          <div class="checkbox">
          </div>
          <button type="submit" id="id-button-addUserThings" class="btn btn-default">Submit</button>
    </form>



</body>
</html>
